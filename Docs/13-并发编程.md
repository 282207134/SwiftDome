# 13 · 并发编程

参考：[Swift 中文文档 · 并发](https://doc.swiftgg.team/documentation/the-swift-programming-language/concurrency)

## 学习目标

- 使用 `async` / `await` 处理异步任务
- 掌握 Task 和 TaskGroup
- 理解 Actor 模型
- 使用 `@MainActor` 更新 UI

## async/await

```swift
func fetchUserID(from server: String) async -> Int {
    try? await Task.sleep(nanoseconds: 1_000_000_000)
    return 42
}

Task {
    let id = await fetchUserID(from: "primary")
    print("用户 ID：\(id)")
}
```

## Actor

```swift
actor Counter {
    private var value = 0

    func increment() -> Int {
        value += 1
        return value
    }
}
```

## 实战练习

1. **批量下载**：使用 TaskGroup
2. **并发计数器**：使用 Actor 保证线程安全

参见 `Sources/13-Concurrency/Concurrency.swift`

下一章 **《14 扩展》**。